<?php

function getHtmlContents ($string, $tagname)
{
    $pattern = '%(<' . $tagname . '[^>]*>.*?</' . $tagname . '>)%i';
    
    preg_match_all($pattern, $string, $matches);
    
    return $matches[1];
}

$html = "<article class=\"markdown\"><h1>Last Tank Standing</h1><p>A BZFlag game mode where the last tank standing wins the match. A match of Last Tank Standing consists of multiple rounds, where a round is defined as the time period until someone is eliminated for being in last place. When a match is declared, all tanks are rendered immobile and cannot shoot until the match has started. During the countdown, last minute players are allowed to join or rejoin if they are not satisfied with their starting position. Once a game has started however, all new joiners will automatically be moved to the observer team and must wait for the next game to start. Everyone's scores are reset to 0 when the match is declared and when the countdown is over in case a stray bullet hits someone during the countdown so there is no need to rejoin to start from 0. After every 60 seconds (this value can be configured via a BZDB variable), the player with the lowest score will be eliminated (i.e. moved to the observer team) and in the case of a tie for last place, no player will be eliminated.</p><h2>Table of Contents</h2><ul><li><p><a href=\"#author\">Author</a></p></li><li><p><a href=\"#compiling\">Compiling</a></p><ul><li><p><a href=\"#requirements\">Requirements</a></p></li><li><p><a href=\"#how-to-compile\">How to Compile</a></p></li></ul></li><li><p><a href=\"#server-details\">Server Details</a></p><ul><li><p><a href=\"#how-to-use\">How to Use</a></p></li><li><p><a href=\"#custom-bzdb-variables\">Custom BZDB Variables</a></p></li><li><p><a href=\"#using-custom-bzdb-variables\">Using Custom BZDB Variables</a></p></li><li><p><a href=\"#custom-slash-commands\">Custom Slash Commands</a></p></li></ul></li><li><p><a href=\"#license\">License</a></p></li></ul><h2>Author</h2><p>Vladimir \"allejo\" Jimenez</p><h2>Compiling</h2><h3>Requirements</h3><ul><li><p>BZFlag 2.4.3+ (After Jan 29th 2013)</p></li><li><p><a href=\"https://github.com/allejo/bztoolkit/\">bzToolkit</a></p></li></ul><h3>How To Compile</h3><ol><li><p>Check out the BZFlag source code.</p><p><code>git clone -b v2_4_x https://github.com/BZFlag-Dev/bzflag-import-3.git bzflag</code></p></li><li><p>Go into the newly checked out source code and then the plugins directory.</p><p><code>cd bzflag/plugins</code></p></li><li><p>Create a plugin using the <code>newplug.sh</code> script.</p><p><code>sh newplug.sh lastTankStanding</code></p></li><li><p>Delete the newly create lastTankStanding directory.</p><p><code>rm -rf lastTankStanding</code></p></li><li><p>Run a git clone of this repository from within the plugins directory. This should have created a new lastTankStanding directory within the plugins directory.</p><p><code>git clone https://github.com/allejo/lastTankStanding.git</code></p></li><li><p>Now you will need to checkout the required submodules so the plugin has the proper dependencies so it can compile properly.</p><p><code>cd lastTankStanding; git submodule update --init</code></p></li><li><p>Instruct the build system to generate a Makefile and then compile and install the plugin.</p><p><code>cd ../..; ./autogen.sh; ./configure; make; make install;</code></p></li></ol><h3>Updating the Plugin</h3><ol><li><p>Go into the lastTankStanding folder located in your plugins folder.</p></li><li><p>Pull the changes from Git.</p><p><code>git pull origin master</code></p></li><li><p>(Optional) If you have made local changes to any of the files from this project, you may receive conflict errors where you may resolve the conflicts yourself or you may simply overwrite your changes with whatever is in the repository, which is recommended. <em>If you have a conflict every time you update because of your local change, submit a pull request and it will be accepted, provided it's a reasonable change.</em></p><p><code>git reset --hard origin/master; git pull</code></p></li><li><p>Compile the changes.</p><p><code>make; make install;</code></p></li></ol><h2>Server Details</h2><h3>How to Use</h3><p>To use this plugin after it has been compiled, simply load the plugin via the configuration file.</p><p><code>-loadplugin /path/to/lastTankStanding.so</code></p><p>If you would like to override the default permissions required for /start and /end for a tournament environment, use the configuration file to specify the permissions required to use the commands and pass the configuration as a parameter when loading the plugin.</p><p><code>-loadplugin /path/to/lastTankStanding.so,/path/to/lastTankStanding.cfg</code></p><h3>Custom BZDB Variables</h3><pre><code>_ltsKickTime_ltsCountdown_ltsIdleKickTime_ltsResetScoreOnElimination</code></pre><p>_ltsKickTime</p><ul><li><p>Default: <em>60</em></p></li><li><p>Description: The number of seconds between each elimination round (i.e. the amount of seconds to wait before eliminating the player with the lowest score).</p></li></ul><p>_ltsCountdown</p><ul><li><p>Default: <em>15</em></p></li><li><p>Description: The number of seconds for the countdown before a game of Last Tank Standing starts.</p></li></ul><p>_ltsIdleKickTime</p><ul><li><p>Default: <em>30</em></p></li><li><p>Description: The numer of seconds to eliminate a player for idling or pausing during a match.</p></li></ul><p>_ltsResetScoreOnElimination</p><ul><li><p>Default <em>false</em></p></li><li><p>Description: Whether or not all of the players' scores should be reset to 0 after each elimination round. When set to true, after a player is eliminated all of the players will start the new round with a score of 0.</p></li></ul><h3>Using Custom BZDB Variables</h3><p>Because this plugin utilizes custom BZDB variables, using <code>-set _ltsKickTime 90</code> in a configuration file or in an options block will cause an error; instead, <code>-setforced</code> must be used to set the value of the custom variable: <code>-setforced _ltsKickTime 90</code>. These variables can be set and changed normally in-game with the <code>/set</code> command.</p><h3>Custom Slash Commands</h3><pre><code>/start/end</code></pre><p>/start</p><ul><li><p>Permission Requirement: vote</p></li><li><p>Description: Start a new match of Last Tank Standing.</p></li></ul><p>/end</p><ul><li><p>Permission Requirement: gameover</p></li><li><p>Description: End the current game of Last Tank Standing.</p></li></ul><p><strong>Notice:</strong> <em>These default permission requirements can be modified by using the optional configuration file to set your own permissions.</em></p><h3>Configuration File Options</h3><p>The configuration file is entirely optional and is only used to specify custom permissions for the /start and /end slash commands; if the specified permission is not a default permission with BZFS, it will be automatically created meaning you can create your own \"lts\" permission. If a configuration file is not specified, the plugin will use the default permissions specificed above in the \"Custom Slash Commands\" section.</p><p><strong>Notice:</strong> <em>When using the configuration file, do <strong>not</strong> use single or double quotes when specifying the permissions.</em></p><p>GAME<em>END</em>PERM</p><ul><li><p>Default: gameover</p></li><li><p>Description: The permission required for the /end command.</p></li></ul><p>GAME<em>START</em>PERM</p><ul><li><p>Default: ban</p></li><li><p>Description: The permission required for the /start command.</p></li></ul><h2>License</h2><p><a href=\"https://github.com/allejo/lastTankStanding/blob/master/LICENSE.markdown\">GNU General Public License v3</a></p></article>";

$headers = array_merge(getHtmlContents($html, "h1"), getHtmlContents($html, "h2"), getHtmlContents($html, "h3"));

foreach ($headers as $header)
{
    echo "#" . strtolower(str_replace(array("<h1>", "<h2>", "<h3>", "</h1>", "</h2>", "</h3>"), "", str_replace(" ", "-", $header))) . "<br />";
}